<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>{{ seo.title }}</title>
  <meta name="description" content="{% if seo.description %}{{ seo.description }}{% else %}{{ config.SITE_DESCRIPTION }}{% endif %}" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta property="og:site_name" content="{{ config.SITE_NAME }}" />
  <meta property="og:title" content="{{ seo.title }}" />
  <meta property="og:description" content="{% if seo.description %}{{ seo.description }}{% else %}{{ config.SITE_DESCRIPTION }}{% endif %}" />
  <meta property="og:type" content="{{ seo.type }}" /> {# website or article #}
  <meta property="og:url" content="{{ request.url_root }}" />
  <meta property="og:image" content="{{ seo.image }}" />
  {% if type == "article" %}
    <meta property="article:published_time" content=" {{ seo.postDate }} " />
    {# <meta property="article:modified_time" content="" /> #}
    <meta property="article:author" content=" {{ seo.author }} " />
    <meta property="article:section" content="{{ seo.category }}" />
    <meta name="twitter:creator" content="{{ seo.author_twitter }}" />
    {# <meta property="article:tag" content="" /> #}
  {% endif %}
  <meta name="twitter:card" content="{{ seo.twitter_type }}" /> {# summary or summary_large_image #}
  <meta name="twitter:site" content="{{ config.SITE_TWITTER }}" /> {# fetch from app config #}
  <meta name="twitter:title" content="{{ seo.title }}" />
  <meta name="twitter:description" content="{% if seo.description %}{{ seo.description }}{% else %}{{ config.SITE_DESCRIPTION }}{% endif %}" />
  <meta name="twitter:image" content="{{ seo.image }}" />
  {# <meta name="theme-color" content="" /> TODO: Add theme color #}
  <meta name="application-name" content="{{ config.SITE_NAME }}" />
  <meta name="msapplication-tooltip" content="{{ config.SITE_DESCRIPTION }}" />
  <meta name="msapplication-starturl" content="/" />
  {# <meta name="msapplication-navbutton-color" content="#FF3300" /> TODO: Add theme color #}
  <meta name="format-detection" content="telephone=no"/>
  <link rel="cononical" href="{{ request.url_root }}" />
  <link rel="shortcut icon" href="{{ url_for('static', filename='favicon.ico') }}" /> {# TODO: Favicon system #}
  <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='favicon.ico') }}" />
  {# <link rel="apple-touch-icon" href="" /> TODO: Apple shortcut icon #}
  {# <link rel="alternate" type="application/rss+xml" title="RSS 2.0" href=""> TODO: Add RSS #}
  <script type="application/ld+json">
  {% if post %}
    {% if type == 'article' %}
      {{ getPostSchema(post) }}
    {% else %}
      {{ getPageSchema(post) }}
    {% endif %}
  {% else %}
    {{ getHomeSchema() }}
  {% endif %}
  </script>
  {% block head %}{% endblock %}
</head>
<body>
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <ul class="flash">
      {% for category, message in messages %}
        <li class="{{ category }}">{{ message }}</li>
      {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}
  {% if current_user.is_authenticated %}
    Hello {{ current_user.first_name }}!
    <a href="{{ url_for("logout") }}">Log out</a>
  {% else %}
    You are not logged in.
    <a href="{{ url_for("google.login") }}">Log in</a>
  {% endif %}
  {% block body %}{% endblock %}
</body>
